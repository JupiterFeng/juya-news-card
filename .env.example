# -------------------------------------------------------------------
# 1) Browser Runtime (public VITE_* variables)
# -------------------------------------------------------------------
# These variables are embedded into frontend bundle.
# Never put real upstream LLM secrets here.

# Browser -> this app backend base URL. Usually same-origin `/api`.
VITE_API_BASE_URL=/api

# Security policy:
# - Cross-origin API targets are blocked by default.
# - Browser Bearer tokens are never sent cross-origin unless explicitly allowed.
VITE_ALLOW_CROSS_ORIGIN_API=false
VITE_ALLOW_CROSS_ORIGIN_BEARER=false

# Default model used in frontend settings (can be changed in UI).
VITE_API_MODEL=gpt-4o-mini

# Default PNG renderer in frontend: `browser` or `render-api`.
VITE_PNG_RENDERER_DEFAULT=browser

# Optional bearer token sent by browser to backend (`/api/generate`, `/render`).
# Avoid this in public deployments unless clients are fully trusted.
# VITE_API_BEARER_TOKEN=change-me

# Optional render endpoint override (when render service is separated).
# If unset, frontend uses same-origin `/api`.
# VITE_RENDER_API_BASE_URL=/api
# VITE_RENDER_API_BEARER_TOKEN=change-me

# Optional static asset overrides for HTML export/template runtime.
# VITE_TAILWIND_SCRIPT_URL=https://cdn.tailwindcss.com
# VITE_MATERIAL_ICONS_URL=https://fonts.googleapis.com/icon?family=Material+Icons
# VITE_MATERIAL_SYMBOLS_URL=https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0&display=swap
# VITE_COMMON_GOOGLE_FONTS_URL=https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap

# -------------------------------------------------------------------
# 2) Vite Dev Server (local development only)
# -------------------------------------------------------------------
VITE_DEV_HOST=0.0.0.0
VITE_DEV_PORT=3000

# Optional explicit proxy target for `/api` in `npm run dev`.
# If empty, Vite uses: `http://127.0.0.1:${RENDER_API_PORT or VITE_RENDER_API_PORT}`.
# VITE_API_PROXY_TARGET=http://127.0.0.1:8080
VITE_RENDER_API_PORT=8080

# -------------------------------------------------------------------
# 3) Backend App API Service (server/render-api.ts)
# -------------------------------------------------------------------
RENDER_API_HOST=127.0.0.1
RENDER_API_PORT=8080

# CORS policy:
# - empty: no cross-origin browser access
# - `*`: allow all (not recommended)
# - comma-separated allowlist: https://app.example.com,https://admin.example.com
CORS_ALLOW_ORIGIN=http://127.0.0.1:3000

# Optional auth for POST `/render` and POST `/api/generate`.
API_BEARER_TOKEN=change-me

# Security policy: keep false in production.
ALLOW_UNAUTHENTICATED_WRITE=false

# Trust X-Forwarded-For for per-IP rate limiting (behind reverse proxy).
TRUST_X_FORWARDED_FOR=false

# Rate limit (per IP)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_RENDER=60
RATE_LIMIT_MAX_GENERATE=30

# Input limits
MAX_REQUEST_BODY_BYTES=2000000
MAX_INPUT_TEXT_CHARS=12000

# -------------------------------------------------------------------
# 4) Server -> Upstream LLM Provider
# -------------------------------------------------------------------
# Required for `/api/generate`
LLM_API_KEY=your-api-key-here

# Optional provider/model overrides.
# Leave `LLM_API_BASE_URL` empty to use SDK/provider default.
# LLM_API_BASE_URL=https://api.openai.com/v1
LLM_MODEL=gpt-4o-mini
LLM_TIMEOUT_MS=60000
LLM_MAX_RETRIES=0
LLM_TEMPERATURE=0.7
LLM_TOP_P=1

# By default, request-time llm overrides from clients are ignored.
ALLOW_CLIENT_LLM_SETTINGS=false
LLM_ALLOWED_MODELS=gpt-4o-mini
LLM_MAX_TOKENS_CAP=4096
LLM_MAX_TOKENS_DEFAULT=0

# -------------------------------------------------------------------
# 5) Render Throughput / Queue
# -------------------------------------------------------------------
MAX_CONCURRENT_1X=4
MAX_CONCURRENT_2X=2
QUEUE_LIMIT=200
WORKER_RECYCLE_COUNT=200

# Render timing (milliseconds)
WAIT_MS=1500
POST_FONT_WAIT_MS=80
RENDER_TIMEOUT_MS=15000
SET_CONTENT_TIMEOUT_MS=12000
FONT_WAIT_TIMEOUT_MS=1500

# Chromium runtime
CHROMIUM_NO_SANDBOX=false
CHROMIUM_DISABLE_DEV_SHM=true
CHROMIUM_DISABLE_GPU=true

# Optional overrides
# PLAYWRIGHT_CHROME_PATH=/absolute/path/to/chromium
# TAILWIND_SCRIPT_URL=http://127.0.0.1:8080/assets/tailwindcss-browser.js
# MATERIAL_ICONS_URL=http://127.0.0.1:8080/assets/material-icons.css
# MATERIAL_SYMBOLS_URL=http://127.0.0.1:8080/assets/material-symbols.css
# COMMON_GOOGLE_FONTS_URL=http://127.0.0.1:8080/assets/common-fonts.css
